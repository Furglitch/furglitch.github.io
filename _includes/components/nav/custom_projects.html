{% comment %} Check if we're on the base wiki or a sub-wiki {% endcomment %}
{% if site.baseurl == "" or site.baseurl == "/" %}
  {% assign is_main_wiki = true %}
  {% assign projects_title = "Projects" %}
  {% assign projects_expanded = "active" %}
{% else %}
  {% assign is_main_wiki = false %}
  {% assign projects_title = site.data.nav.projects.title %}
  {% assign projects_expanded = "" %}
{% endif %}

<nav aria-label="Other Projects" class="site-nav">
  <ul class="nav-list">
    <li class="nav-list-item {{ projects_expanded }}">
      <a href="#" class="nav-list-expander">
        <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg>
      </a>
      <div class="nav-list-link">{{ projects_title }}</div>
      
      <ul class="nav-list">
      {% for group in site.data.nav.projects.groups %}
        <li class="nav-list-item active">
          {% if group.items %}
          <a href="#" class="nav-list-expander" aria-label="toggle {{ group.title }}">
            <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg>
          </a>
          {% endif %}
          {% if group.repo %}
            <a href="{{ site.url }}/{{ group.repo }}/" class="nav-list-link">{{ group.title }}</a>
          {% else %}
            <div class="nav-list-link">{{ group.title }}</div>
          {% endif %}
          
          {% if group.items %}
          <ul class="nav-list active">
            {% for item in group.items %}
              {% if item.items %}
                <li class="nav-list-item active">
                  <a href="#" class="nav-list-expander">
                    <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg>
                  </a>
                  {% if item.repo %}
                    <a href="{{ site.url }}/{{ item.repo }}/" class="nav-list-link">{{ item.title }}</a>
                  {% else %}
                    <div class="nav-list-link">{{ item.title }}</div>
                  {% endif %}
                  <ul class="nav-list active">
                    {% for subitem in item.items %}
                    <li class="nav-list-item">
                      {% if subitem.repo %}
                        <a href="{{ site.url }}/{{ subitem.repo }}/" class="nav-list-link">{{ subitem.title }}</a>
                      {% else %}
                        <div class="nav-list-link">{{ subitem.title }}</div>
                      {% endif %}
                    </li>
                    {% endfor %}
                  </ul>
                </li>
              {% else %}
                <li class="nav-list-item">
                  {% if item.repo %}
                    <a href="{{ site.url }}/{{ item.repo }}/" class="nav-list-link">{{ item.title }}</a>
                  {% else %}
                    <div class="nav-list-link">{{ item.title }}</div>
                  {% endif %}
                </li>
              {% endif %}
            {% endfor %}
          </ul>
          {% endif %}
        </li>
      {% endfor %}
      </ul>
    </li>
  </ul>
</nav>
